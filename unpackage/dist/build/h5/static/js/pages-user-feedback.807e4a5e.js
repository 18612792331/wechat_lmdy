(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-feedback"],{"24fc":function(t,i,a){"use strict";a.r(i);var n=a("a8df"),e=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(i,t,(function(){return n[t]}))}(s);i["default"]=e.a},"4c26":function(t,i,a){var n=a("b07c");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var e=a("4f06").default;e("6e245ab4",n,!0,{sourceMap:!1,shadowMode:!1})},"8f4b":function(t,i,a){"use strict";var n=a("4c26"),e=a.n(n);e.a},a8df:function(t,i,a){"use strict";a("99af"),a("a15b"),a("a434"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n={data:function(){return{isLogin:!1,select:0,type:["问题反馈","意见建议","我要求片"],imgList:[],formData:{type:"问题反馈",content:"",imgs:[],contact:""},imgTmp:null}},mounted:function(){this.init()},methods:{init:function(){var t=uni.getStorageSync("userInfo");t&&(this.isLogin=!0)},save:function(){var t=this;return t.formData.content.length<=0?(uni.showToast({title:"请填写反馈内容",icon:"none"}),!1):!t.isLogin&&t.formData.contact.length<=0?(uni.showToast({title:"请填写联系方式",icon:"none"}),!1):(t.formData.imgs.length>0&&(t.formData.imgs=t.formData.imgs.join(",")),void t.$http.post("/user/user/feedback",t.formData).then((function(i){uni.showToast({title:i.msg,icon:"none"}),200==i.code&&(t.formData={type:"问题反馈",content:"",imgs:[],contact:""},t.imgList=[])})).catch((function(t){})))},PickerChange:function(t){this.select=t.detail.value,this.formData.type=this.type[t.detail.value]},ChooseImage:function(){var t=this;uni.chooseImage({count:4,sizeType:["original","compressed"],sourceType:["album"],success:function(i){0!=t.imgList.length?t.imgList=t.imgList.concat(i.tempFilePaths):t.imgList=i.tempFilePaths,t.imgToBase64(i)}})},ViewImage:function(t){uni.previewImage({urls:this.imgList,current:t.currentTarget.dataset.url})},DelImg:function(t){this.imgList.splice(t.currentTarget.dataset.index,1),this.formData.imgs.splice(t.currentTarget.dataset.index,1)},imgToBase64:function(t){},uploadImg:function(t){var i=this,a={code:t,type:"feedback"};i.$http.post("/attachment/attachment/uploadImg",a).then((function(t){200==t.code&&(i.formData.imgs=i.formData.imgs.concat(t.data.file))})).catch((function(t){}))},checkImgByHttp:function(t){var i=this;uni.showLoading({title:"加载中...",mask:!0}),i.$http.post("/index/home/checkImg",{str:t}).then((function(a){if(uni.hideLoading(),200!=a.code)return uni.showModal({title:"警告",content:"图片含有违法信息",showCancel:!1}),!1;i.uploadImg(t)})).catch((function(t){uni.hideLoading(),uni.showToast({title:"网络错误",icon:"none"})}))}}};i.default=n},b07c:function(t,i,a){var n=a("24fb");i=n(!1),i.push([t.i,".solids[data-v-2d12a09a]::after{border:%?1?% solid #45506a}",""]),t.exports=i},cf89:function(t,i,a){"use strict";a.r(i);var n=a("d293"),e=a("24fc");for(var s in e)"default"!==s&&function(t){a.d(i,t,(function(){return e[t]}))}(s);a("8f4b");var o,c=a("f0c5"),u=Object(c["a"])(e["default"],n["b"],n["c"],!1,null,"2d12a09a",null,!1,n["a"],o);i["default"]=u.exports},d293:function(t,i,a){"use strict";var n,e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"pages"},[a("v-uni-view",{staticClass:"cu-bar bg-my-light-black"},[a("v-uni-view",{staticClass:"action"},[a("v-uni-text",{staticClass:"cuIcon-title text-my-red"}),t._v("如果您在使用过程中发现软件问题或者有好的建议，亦或求片，都可以在这里进行反馈：")],1)],1),a("v-uni-view",{staticClass:"cu-form-group margin-top"},[a("v-uni-view",{staticClass:"title"},[t._v("反馈类型")]),a("v-uni-picker",{attrs:{value:t.select,range:t.type},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.PickerChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.type[t.select]))])],1)],1),a("v-uni-view",{staticClass:"cu-form-group align-start solid-bottom"},[a("v-uni-view",{staticClass:"title"},[t._v("反馈内容")]),a("v-uni-textarea",{attrs:{maxlength:"200",placeholder:"请输入内容"},model:{value:t.formData.content,callback:function(i){t.$set(t.formData,"content",i)},expression:"formData.content"}})],1),a("v-uni-view",{staticClass:"cu-bar bg-my-light-black"},[a("v-uni-view",{staticClass:"action"},[t._v("图片上传")]),a("v-uni-view",{staticClass:"action"},[t._v(t._s(t.imgList.length)+"/4")])],1),a("v-uni-view",{staticClass:"cu-form-group margin-top"},[a("v-uni-view",{staticClass:"grid col-4 grid-square flex-sub"},[t._l(t.imgList,(function(i,n){return a("v-uni-view",{key:n,staticClass:"bg-img",attrs:{"data-url":t.imgList[n]},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.ViewImage.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:t.imgList[n],mode:"aspectFill"}}),a("v-uni-view",{staticClass:"cu-tag bg-red",attrs:{"data-index":n},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.DelImg.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)})),t.imgList.length<4?a("v-uni-view",{staticClass:"solids",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.ChooseImage.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-cameraadd"})],1):t._e()],2)],1),t.isLogin?t._e():a("v-uni-view",{staticClass:"cu-form-group margin-top solid-bottom"},[a("v-uni-view",{staticClass:"title"},[t._v("联系方式")]),a("v-uni-input",{attrs:{placeholder:"请输入QQ号或者手机号",type:"number"},model:{value:t.formData.contact,callback:function(i){t.$set(t.formData,"contact",i)},expression:"formData.contact"}})],1),a("v-uni-view",{staticClass:"padding flex flex-direction"},[a("v-uni-button",{staticClass:"cu-btn bg-my-red margin-tb-sm lg",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.save.apply(void 0,arguments)}}},[t._v("提交")])],1)],1)},s=[];a.d(i,"b",(function(){return e})),a.d(i,"c",(function(){return s})),a.d(i,"a",(function(){return n}))}}]);