(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-login"],{"0447":function(t,a,n){"use strict";var o,e=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("v-uni-view",{staticClass:"zai-box pages"},[o("v-uni-image",{staticClass:"zai-logo",attrs:{src:n("f395"),mode:"aspectFit"}}),o("v-uni-view",{staticClass:"zai-title"},[t._v(t._s(t.appName))]),o("v-uni-view",{staticClass:"zai-form"},[o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-input",{staticClass:"zai-input",attrs:{maxlength:"11",type:"number",placeholder:"请输入手机号"},model:{value:t.formValue.account,callback:function(a){t.$set(t.formValue,"account",a)},expression:"formValue.account"}})],1),o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-input",{staticClass:"zai-input",attrs:{password:!0,placeholder:"请输入密码"},model:{value:t.formValue.password,callback:function(a){t.$set(t.formValue,"password",a)},expression:"formValue.password"}})],1),o("v-uni-button",{staticClass:"zai-btn bg-my-red",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.login.apply(void 0,arguments)}}},[t._v("立即登录")]),o("v-uni-navigator",{staticClass:"zai-label",attrs:{url:"../user/register","hover-class":"none"}},[t._v("还没有账号？点此注册")])],1)],1)},i=[];n.d(a,"b",(function(){return e})),n.d(a,"c",(function(){return i})),n.d(a,"a",(function(){return o}))},2820:function(t,a,n){"use strict";var o=n("b892"),e=n.n(o);e.a},"30aa":function(t,a,n){var o=n("24fb");a=o(!1),a.push([t.i,".cu-form-group[data-v-1fff401a]{border:none!important;background-color:#161827!important}.zai-box[data-v-1fff401a]{padding:0 %?100?%;position:relative}.zai-logo[data-v-1fff401a]{width:100%;height:%?310?%}.zai-title[data-v-1fff401a]{position:absolute;top:0;line-height:%?360?%;font-size:%?68?%;color:#fff;text-align:center;width:100%;margin-left:%?-100?%}.zai-form[data-v-1fff401a]{margin-top:%?300?%}.zai-input[data-v-1fff401a]{background:#e2f5fc;margin-top:%?30?%;border-radius:%?100?%;padding:0 %?40?%;font-size:%?36?%;height:%?80?%!important;min-height:%?80?%!important;line-height:%?80?%!important}.input-placeholder[data-v-1fff401a], .zai-input[data-v-1fff401a]{color:#94afce}.zai-label[data-v-1fff401a]{padding:%?60?% 0;text-align:center;font-size:%?30?%;color:#a7b6d0}.zai-btn[data-v-1fff401a]{\n\n\nbackground:#48b3fd;\ncolor:#fff;border:0;border-radius:%?100?%;font-size:%?36?%;margin-top:%?80?%}.zai-btn[data-v-1fff401a]:after{border:0}\n/*按钮点击效果*/.zai-btn.button-hover[data-v-1fff401a]{-webkit-transform:translate(%?1?%,%?1?%);transform:translate(%?1?%,%?1?%)}.zai-form .tips[data-v-1fff401a]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}",""]),t.exports=a},"36b6":function(t,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o={data:function(){return{formValue:{type:"login",account:"",password:""},showBindMobile:!1,bindForm:{mobile:""},appName:this.$helper.appName,loginCode:"",getUserInfoLoading:!1,goback:!1}},onLoad:function(t){t.hasOwnProperty("to")&&(this.goback=!0)},onShow:function(){var t=this;uni.login({provider:"weixin",success:function(a){t.loginCode=a.code}})},methods:{getuserinfo:function(t){var a=this,n=t.detail;if(a.getUserInfoLoading=!0,a.loginCode.length<=0)return a.getUserInfoLoading=!1,uni.showToast({title:"获取code失败",icon:"none"}),!1;n.code=a.loginCode,n.iv=encodeURIComponent(n.iv),n.encryptedData=encodeURIComponent(n.encryptedData),a.$http.post("/user/wechat/mplogin",n).then((function(t){if(a.getUserInfoLoading=!1,200==t.code){if(0==t.data.has_account)return a.showBindMobile=!0,void(a.bindForm=t.data);if(uni.setStorageSync("userInfo",t.data),uni.setStorageSync("token",t.data.token),a.goback)return uni.navigateBack(),!0;uni.switchTab({url:"/pages/user/index"})}else uni.showToast({title:t.msg+"请重试"||!1,icon:"none"})})).catch((function(t){a.getUserInfoLoading=!1}))},bingMobile:function(){var t=this;uni.showLoading({mask:!0}),t.bindForm.mobile=t.formValue.account,t.$http.post("/user/wechat/bindMobile",t.bindForm).then((function(t){uni.hideLoading(),200==t.code?(uni.setStorageSync("userInfo",t.data),uni.setStorageSync("token",t.data.token),uni.switchTab({url:"/pages/user/index"})):uni.showToast({title:t.msg||"绑定失败",icon:"none"})})).catch((function(t){}))},login:function(){var t=this;if(!t.formValue.account||!t.formValue.password)return uni.showToast({title:"请输入帐号和密码",icon:"none"}),!1;t.$http.post("/user/auth/dosth",t.formValue).then((function(a){if(uni.showToast({title:a.msg,icon:"none"}),200==a.code){if(uni.setStorageSync("userInfo",a.data),uni.setStorageSync("token",a.data.token),t.goback)return uni.navigateBack(),!0;uni.switchTab({url:"/pages/user/index"})}})).catch((function(t){}))}}};a.default=o},"93da":function(t,a,n){"use strict";n.r(a);var o=n("36b6"),e=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(a,t,(function(){return o[t]}))}(i);a["default"]=e.a},b892:function(t,a,n){var o=n("30aa");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var e=n("4f06").default;e("42985b5b",o,!0,{sourceMap:!1,shadowMode:!1})},d6fc:function(t,a,n){"use strict";n.r(a);var o=n("0447"),e=n("93da");for(var i in e)"default"!==i&&function(t){n.d(a,t,(function(){return e[t]}))}(i);n("2820");var r,s=n("f0c5"),u=Object(s["a"])(e["default"],o["b"],o["c"],!1,null,"1fff401a",null,!1,o["a"],r);a["default"]=u.exports},f395:function(t,a,n){t.exports=n.p+"static/img/login.8ecf867e.png"}}]);